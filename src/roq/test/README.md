The design is that of a state machine.
